# 크롤링(`crawling`) 스크레이핑(`scraping`)
* 크롤러(`crawler`)
    * 자동으로 웹페이지에 있는 정보를 수집하는 프로그램
    * 단기간에 대규모의 정보를 수집할 수 있음
* 스크레이핑(`scraping`)
    * 수집한 정보를 분석 뒤 필요한 정보를 추출하는 작업
* 처리 과정
    * 수집 -> 분석 -> 추출 -> 가공 -> 저장 -> 출력
* 주의사항
    * 웹사이트 접근할 때
        * 웹사이트 이용 규약 확인
        * robots.txt, robot 메타 태그에 대한 접근 제한 사항을 확인
        * 서버에 부하가 되지 않을 속도로 접근
        * `rel="nofollow"` 설정이 보이면 크롤러로 접근하지 않음
    * 수집한 데이터를 다룰 때
        * 저작권을 지켜야 하고, 개인적인 용도로는 사용이 가능
        * 웹 사이트와 API 사용 규약을 확인해야 함
        * 상대방에게 확인한 뒤, 데이터를 공개
* 크롤러 설계 기본
    * 목적과 대상을 명확하게 해야함
    * URL 확인하기
        * 사이트맵을 트리구조(페이지)로 제공하는 사이트
            * https://www.seoul.go.kr/helper/siteMap.do
        * 사이트맵을 XML로 제공하는 사이트
            * https://www.usa.gov/sitemap.xml
    * 웹 API
        * 특정 URL에 정해진 매개변수를 넣어 접근하면 XML, Json 등 구조화된 데이터를 
        제공해주는 기능
* 크롤러 설계 시 주의사항
    * "출력 결과로 무엇이 필요한가?" 가 크롤러 설계를 하는 목적임
        * 스프레드시트의 특정 위치에 숫자 반영
        * 다른 시스템과 연동할 수 있게 API 제공
        * 자기 사이트에서 읽을 수 있게 피드를 만듦
    * 출력 결과로 관련된 명확한 정보가 있어야 함
    * 네트워크 요청시
        * 간격 설정 : 1초에 1번정도로 요청하는 것을 권장
        * 타임아웃 : 요청한 사이트에서 3초동안 응답이 없으면 멈춤
        * 재시도 
            * 큰 문제가 없는데 오류를 응답할 때
            * 1-3 회 정도로 횟수 제한해야 함
            * 재시도하는 간격도 고려해야 함
    * 파싱(`parsing`) 
        * 대부분은 UTF-8, HTML 코드는 여러 문자코드로 작성된 경우가 많음(EUC-KR 등)
        * 큰 따옴표나, 태그가 잘못 구성된 경우가 많으니 HTML/XML 파싱 시 주의해야 함
        * 대부분의 웹API는 JSON 형식으로 데이터를 응답함
    * 스크레이핑(`scraping`)과 정규 표현식
        * URL 정규화(절대주소, 상대주소)
        * 테스트 코드를 이용함
    * 데이터 저장소의 구조와 선택
        * 데이터 저장소 
            * 파일(txt, HTML, CSV, TSV, excel,...)
            * 문서DB(NOSQL)
            * 관계형 DB(RDBMS)
            * 객체 DB
            * 키-값 DB (NOSQL)
        * 배치(`batch`)를 만들 때 주의점
            * 데이터를 실시간 처리하는게 아닌, 일괄 처리를 위해 모아서 한 번에 처리하는 과정을 말함
            * 공정분리 -> 중간데이터 저장 -> 실행 시간 숙지 -> 중지 조건 설정 -> 함수 매개변수 간단히 -> 날짜 형식을 다룰 때 주의
        * 설계(https://wikibook.co.kr/list/)
            * 소스 확인
            * 파일 저장 형식
                * CSV(Comma-Separated Values)
                * TSV(Tab-Separated Values)
                * JSON(JavaScript Object Notation)
